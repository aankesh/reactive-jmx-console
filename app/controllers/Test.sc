/**
 * Created with IntelliJ IDEA.
 * User: ahenrick
 * Date: 10/9/13
 * Time: 3:35 PM
 * To change this template use File | Settings | File Templates.
 */


import fr.janalyse.jmx.RichMBean
import jajmx._
import play.api.libs.json._

val jmx = JMX()
val domains = jmx.domains



val mbeanWrites = new Writes[RichMBean] {
  def writes(m: RichMBean) = Json.obj(
    "name" -> Json.toJson(m.name),
    "description" -> Json.toJson(m.domain)
  )
}

/*val mbeanWrites2 : Writes[RichMBean] = (
    (__ \ 'name ).write[String] and
      (__ \ 'domain ).write[String]
   ) (unlift(RichMBean.unapply))*/


val mbeans = jmx.mbeans()


val json = Json.toJson(mbeans)

/*for {
  domain <- jmx.domains
  mbean <- jmx.mbeans(domain + ":*")
  attr  <- mbean.attributes
  value <- mbean.getString(attr)
} {
  println(s"${mbean.name} - ${attr.name} = ${value}")
  println("*******************************************")
}*/













































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































